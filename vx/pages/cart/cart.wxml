<!-- å·²é€‰æœåŠ¡ -->
<view class="cart-page">
  <!-- å·²é€‰æœåŠ¡ -->
  <view wx:if="{{cartItems.length > 0}}">
    <!-- æœåŠ¡åˆ—è¡¨ -->
    <scroll-view scroll-y="{{true}}" class="cart-list">
      <view class="cart-item" wx:for="{{cartItems}}" wx:key="id">
        <image src="{{item.image}}" mode="aspectFill" class="item-image"></image>
        <view class="item-info">
          <text class="item-name">{{item.name}}</text>
          <text class="item-desc">{{item.desc}}</text>
          <view class="item-footer">
            <text class="price">
              <text class="price-symbol">Â¥</text>{{item.price}}
            </text>
            <view class="quantity-control">
              <view class="control-btn" bindtap="decreaseQuantity" data-id="{{item.id}}">-</view>
              <text class="quantity">{{item.quantity}}</text>
              <view class="control-btn" bindtap="increaseQuantity" data-id="{{item.id}}">+</view>
            </view>
          </view>
        </view>
      </view>
    </scroll-view>

    <!-- ä¼˜æƒ ä¿¡æ¯ -->
    <view class="discount-section card">
      <view class="discount-item">
        <text class="discount-label">ğŸ’° ä¼˜æƒ åˆ¸</text>
        <text class="discount-value">æš‚æ— å¯ç”¨</text>
      </view>
      <view class="discount-item">
        <text class="discount-label">ğŸ æ»¡å‡ä¼˜æƒ </text>
        <text class="discount-value primary-color">-Â¥{{discount.toFixed(2)}}</text>
      </view>
    </view>

    <!-- ç»“ç®—ä¿¡æ¯ -->
    <view class="summary-section card">
      <view class="summary-item">
        <text class="summary-label">{{i18n.cart.subtotal}}</text>
        <text class="summary-value">Â¥{{subtotal.toFixed(2)}}</text>
      </view>
      <view class="summary-item">
        <text class="summary-label">{{i18n.cart.discount}}</text>
        <text class="summary-value primary-color">-Â¥{{discount.toFixed(2)}}</text>
      </view>
      <view class="divider"></view>
      <view class="summary-item total">
        <text class="summary-label">{{i18n.cart.total}}</text>
        <text class="summary-value price">Â¥{{total.toFixed(2)}}</text>
      </view>
    </view>

    <!-- åº•éƒ¨ç»“ç®—æ  -->
    <view class="checkout-bar">
      <view class="total-info">
        <text class="total-label">{{i18n.cart.total}}ï¼š</text>
        <text class="price">
          <text class="price-symbol">Â¥</text>{{total.toFixed(2)}}
        </text>
      </view>
      <view class="checkout-btn" bindtap="checkout">
        {{i18n.cart.submit}}ï¼ˆ{{totalQuantity}}ï¼‰
      </view>
    </view>
  </view>

  <!-- æœªé€‰æœåŠ¡ -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸ’…</text>
    <text class="empty-text">{{i18n.cart.empty}}</text>
    <view class="go-shopping-btn" bindtap="goToMenu">
      {{i18n.cart.goShopping}}
    </view>
  </view>
</view>
